![Arcadier](https://theme.zdassets.com/theme_assets/2008942/9566e69f67b1ee67fdfbcd79b1e580bdbbc98874.svg "Arcadier")
Adding pages to the merchant portal
===================================
1. [Adding a page for all merchants, accessible from any page](https://github.com/Arcadier/Tutorials/tree/master/Adding%20a%20new%20page%20to%20merchant#adding-a-page-for-all-merchants-accessible-from-any-page)
2. [Adding a page for all merchants on a specific type of marketplace (bespoke/spacetime), accessible from any page](https://github.com/Arcadier/Tutorials/tree/master/Adding%20a%20new%20page%20to%20merchant#adding-a-page-for-all-merchants-on-a-specific-type-of-marketplace-bespokespacetime-accessible-from-any-page)
3. [Adding a page for all merchants on a specific type of marketplace (bespoke/spacetime), accessible from a specific page](https://github.com/Arcadier/Tutorials/tree/master/Adding%20a%20new%20page%20to%20merchant#adding-a-page-for-all-merchants-on-a-specific-type-of-marketplace-bespokespacetime-accessible-from-a-specific-page)

---
The first step is to create the new page in HTML. One important thing to know before starting to
write the page is that if an empty html file is saved in the user/html folder, the page, when accessed,
will not empty.
Instead it will look like this:

<p align="center"><img src="https://drive.google.com/uc?id=1UBVbRDJPewDOMhBHeQGa3rOUWV2b4nwR" width="430px" height="225px"/></p>

What you are looking at right now is the marketplace’s header, footer, and no body in between.

## Adding a page for all merchants, accessible from any page. ##
* The only restriction we have for this section is making that page accessible from a merchant’s portal only. We write that restriction in JavaScript using:
```javascript
if($('#merchantId') && $('#merchantId').length){
  //do something
}
```
* Next, we will create a link and place it somewhere in the general merchant pages. For example, if we want to put it in the “Seller” dropdown menu. 
<p align="center"><img src="https://drive.google.com/uc?id=1ch_bxdY8-jx2_O_g8p6jVCvdklMCzosJ" height="265px" width="445px"/></p>
The script that creates the link to be out there can be in this form:

```javascript
(function() {
    var scriptSrc = document.currentScript.src;
    var packagePath = scriptSrc.replace('/scripts/scripts.js', '').trim();
    var re = /([a-f0-9]{8}(?:-[a-f0-9]{4}){3}-[a-f0-9]{12})/i;
    var packageId = re.exec(scriptSrc.toLowerCase())[1];
    var hostname = window.location.hostname;

    if($('#merchantId') && $('#merchantId').length){
      
        var a = document.createElement("a"); 
        a.href = "https://" + hostname + "/user/plugins/" + packageId + "/link.html";
        a.innerHTML = "Link"; 
        a.target = "_blank";

        var b = document.createElement("li");
            b.appendChild(a);

        var c = document.querySelector("ul.seller-nav");
            c.appendChild(b);

    }
})();
```

“ul.seller-nav” is the unordered list with class = “seller-nav”, which is the element that codes for the
seller dropdown menu.
As can be seen above, the link’s URL points to an html file that was created and saved in the **user/html** folder.

* Next, we create the [HTML file](https://github.com/Arcadier/Tutorials/blob/master/Adding%20a%20new%20page%20to%20merchant/user/html/link.html) and give it a name that is matched on the script. In this example, we created a file with very random content:
  * A dynamically changing graph which is representing numbers being generated by a script.
  * A button that affects the look of an element.
  * A button that calls an API, displays the response, and triggers Arcadier’s Toastr notification.
  * An iframe from an external app (Spotify)
  * A random image with a random button.


This HTML file is saved in the **user/html** folder.
The scripts are all saved in the **user/scripts** folder.

After correctly and successfully uploading all the files on the developer dashboard. Clicking the buttons should result in this, meaning all the scripts are working and correctly linked in
their respective directories:

<p align="center"><img src="https://drive.google.com/uc?id=1Y-Lqp0aSB69ukqjUWiRCnoiz9HreJv1L"/></p>

## Adding a page for all merchants on a specific type of marketplace (bespoke/spacetime), accessible from any page. ##
* The additional restriction we have here we have for this section is making that page accessible from a merchant’s portal only, for bespoke marketplaces. We write that restriction in JavaScript using:
```javascript
if($('#merchantId') && $('#merchantId').length){
  if('input').each(function(){
    if($(this).attr('value') == 'bespoke'){
      //do something
    }
  })
})
```
* For spacetime marketplaces:
```javascript
if($('#merchantId') && $('#merchantId').length){
  if('input').each(function(){
    if($(this).attr('value') == 'spacetime'){
      //do something
    }
  })
})
```
## Adding a page for all merchants on a specific type of marketplace (bespoke/spacetime), accessible from a specific page. ##

* The additional restriction we have here we have for this section is making that page
accessible from a merchant’s portal only, for bespoke marketplaces, on a specific page. For
example, we want merchants to be able to access the page when they visit the item details
page of their bespoke marketplace. We write that restriction in JavaScript using:
```javascript
if($('#merchantId') && $('#merchantId').length && $('body').hasClass('item-detail-page')){
  if('input').each(function(){
    if($(this).attr('value') == 'spacetime'){
      //do something
    }
  })
})
```
<p align="center">OR (to add the link on the cart page):</p>

```javascript
if($('#merchantId') && $('#merchantId').length && $('body').hasClass('page-cart')){
  if('input').each(function(){
    if($(this).attr('value') == 'spacetime'){
      //do something
    }
  })
})
```
